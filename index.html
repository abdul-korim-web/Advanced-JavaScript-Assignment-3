<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDo List!</title>
    <link rel="stylesheet" href="ToDoList.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css">
</head>
<body class="bg-[#00021D] flex flex-col justify-center items-center min-h-screen ">
    <form action="" class="bg-[#53A5A8] flex flex-col p-10 form  ">
        <label for="" class="text-3xl text-gray-900 text-center font-semibold mb-5 underline  ">ToDo List!</label>
        <div class="input-Fild flex space-x-5 md:text-3xl ">
            <input type="text" class="inputStyle todoinput md:w-[400px]" placeholder="Add Your New ToDo...........">
            <button class="plusbtn btnStyle bg-[#8B5EC6] " ><i class="fa-solid fa-plus text-3xl"></i></button>

        </div>
        <div  class="allitem">
            <ol class=" ol flex flex-col space-y-2"">
                <!-- this web deleloped by Abdul Korim  -->
                
                
            </ol>
        </div>
    </form>
    <script>
        //html tag access 
let todoinput = document.querySelector(`.todoinput`);
let form = document.querySelector(`.form`);
let todoTilel = document.querySelector(`.todoTilel`);
let todoTilelChenge = document.querySelector(`.todoTilelChenge`);
let plusbtn = document.querySelector(`.plusbtn`);
let checkbtn = document.querySelector(`.checkbtn`);
let editbtn = document.querySelector(`.editbtn`);
let deletebtn = document.querySelector(`.deletebtn`);
let allitem = document.querySelector(`.allitem`);
let ol = document.querySelector(`.ol`);

// form preventDefault
form.addEventListener(`submit`,(e)=>{
    e.preventDefault()
})
//List Structure
function getListStructure(text){
    let finalList = `
    <li class="flex justify-between mt-5 bg-white py-3 px-3 rounded-xl items-center w-full     ">
            <div class="itemspandinput">
                <p class="text-x md:text-3xl todoTilel  ">${text}</p>
                <input type="text" class=" todoTilelChengeinput  bg-[#8B5EC6] inputStyle border md:text-3xl w-[150px] md:w-[250px] hidden "">
            </div>
            <div class="btndiv">
                <button class="checkbtn btnStyle bg-[#28A745]"><i class="fa-solid fa-check md:text-3xl  "></i></button>
                <button  class="editbtn btnStyle bg-[#EBD316]"><i class="fa-solid fa-pen-to-square md:text-3xl"></i></button>
                <button  class="deletebtn btnStyle bg-[#DC3545]"><i class="fa-solid fa-trash md:text-3xl"></i></button>
            </div>

    </li>
    `
    return finalList
}

//add todo list

plusbtn.addEventListener(`click`,()=>{

    // invalid value
    if (todoinput.value == ``){
        alert(`please insert the value and continue`)
        return;
    }
    //dublicate
    let alltodoTilel = document.querySelectorAll(`.todoTilel`);

    for(let exittext of alltodoTilel){
        
        if(exittext.textContent == todoinput.value){
            alert(`Todo Item is already Exist`)
            return;
        }
    }

    //properli work
    ol.insertAdjacentHTML(`beforeend`,getListStructure(todoinput.value))
    todoinput.value = ``
})

// remove item 
ol.addEventListener(`click`,(e)=>{
    let deletebtn = e.target.closest(`.deletebtn`)
    if (deletebtn){
        let li = e.target.closest(`li`)
        li.remove()
    }
    
})

//when click change button icon and line Through 
ol.addEventListener(`click`,(e)=>{
    let checkbtn = e.target.closest(`.checkbtn`)
    let li= e.target.closest(`li`)
    let p = li.querySelector(`p`)
    let deletebtn = li.querySelector(`.deletebtn`)
    let editbtn = li.querySelector(`.editbtn`)
    if (checkbtn){
        let iconChange = checkbtn.querySelector(`i`) 

        
        iconChange.classList.toggle('fa-arrows-rotate');
        if (p.style.textDecoration == `line-through`){
            p.style.textDecoration = `none`
            deletebtn.classList.remove(`hidden`)
            editbtn.classList.remove(`hidden`)
        } else {
            p.style.textDecoration = `line-through`
            deletebtn.classList.add(`hidden`)
            editbtn.classList.add(`hidden`)
        }



    }
})
//edit todolist

ol.addEventListener(`click`,(e)=>{
    let editbtn = e.target.closest(`.editbtn`)
    let li = e.target.closest(`li`)
    let input = li.querySelector(`.todoTilelChengeinput`)
    let p = li.querySelector(`p`)
    let iconChange = editbtn.querySelector(`i`)
    let deletebtn = li.querySelector(`.deletebtn`)
    let checkbtn = li.querySelector(`.checkbtn`)

    if (editbtn){
        iconChange.classList.toggle('fa-floppy-disk');
        
        // update todo item
        if(input.classList.contains(`hidden`)){
            input.value = p.textContent
            input.classList.remove(`hidden`)
            p.classList.add(`hidden`)
            deletebtn.classList.add(`hidden`)
            checkbtn.classList.add(`hidden`)
            
            
        } else{
            p.textContent= input.value
            p.classList.remove(`hidden`)
            input.classList.add(`hidden`)
            deletebtn.classList.remove(`hidden`)
            checkbtn.classList.remove(`hidden`)
        }
    }
})





    </script>
    <!-- <script src="JavaScript/ToDoList.js"></script> -->
    
</body>
</html>